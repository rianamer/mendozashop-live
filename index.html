<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mendoza Shop</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/qDGrncf/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>if(localStorage.getItem('theme')==='light')document.documentElement.classList.remove('dark');</script>
    <style>body{font-family:'Inter',sans-serif}.dark .bg-white{background-color:#1e293b}.dark h1,.dark h2,.dark h3,.dark h4{color:#e2e8f0}.dark p,.dark label,.dark span{color:#cbd5e1}.dark .text-gray-500{color:#94a3b8}.dark .border-b,.dark .border-t{border-color:#334155}.dark .filter-btn{background-color:#334155;color:#cbd5e1}.dark .filter-btn.active{background-color:#3b82f6;border-color:#3b82f6;color:white}.dark .payment-option{background-color:#334155;border-color:#475569}.dark .payment-option.selected{background-color:#374151;border-color:#3b82f6}.modal-backdrop{background-color:rgba(0,0,0,0.6)}.modal{transition:transform .3s,opacity .3s}.modal.hidden{transform:scale(.95);opacity:0;pointer-events:none}.image-nav-btn{position:absolute;top:50%;transform:translateY(-50%);background-color:rgba(0,0,0,0.4);color:white;border-radius:50%;width:40px;height:40px;z-index:10;display:flex;align-items:center;justify-content:center;font-size:24px}.thumbnail-image{opacity:.6;cursor:pointer;border:2px solid transparent;transition:opacity .2s,border-color .2s}.thumbnail-image.active{opacity:1;border-color:#3b82f6}</style>
</head>
<body class="bg-slate-900 text-gray-300">
    <header class="bg-white shadow-md sticky top-0 z-40"><div class="container mx-auto px-6 py-4 flex justify-between items-center"><a href="#"><img src="https://i.postimg.cc/fyBrZht2/Gemini-Generated-Image-7nos987nos987nos-1.png" alt="Mendoza Shop Logo" class="h-16 w-auto"></a><div class="flex items-center space-x-2"><button id="theme-toggle" data-action="toggle-theme" class="p-2 rounded-full"><svg class="h-6 w-6" id="theme-icon-container"><use href="#icon-moon"/></svg></button><button data-action="open-cart" class="relative p-2"><i class="fas fa-shopping-cart text-2xl text-gray-300"></i><span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">0</span></button></div></div></header>
    <main class="container mx-auto px-6 py-8"><section class="mb-4"><h2 class="text-2xl font-bold mb-4">Kategori</h2><div id="category-filters" class="flex flex-wrap gap-2"></div></section><section id="subcategory-section" class="mb-8 hidden"><h3 id="subcategory-title" class="text-xl font-semibold mb-3"></h3><div id="subcategory-filters" class="flex flex-wrap gap-2"></div></section><section><h2 id="product-section-title" class="text-2xl font-bold mb-4"></h2><div id="product-grid" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6"><div id="initial-message" class="col-span-full p-12 text-center"><p class="text-lg">Silakan pilih kategori untuk melihat produk.</p></div></div></section></main>
    <footer class="bg-white mt-12 py-8"><div class="container mx-auto px-6 text-center"><p class="text-gray-400">© 2025 Mendoza Shop.</p></div></footer>
    <div id="modal-container"></div>
    <svg style="display:none;"><defs><symbol id="icon-moon" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></symbol><symbol id="icon-sun" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></symbol></defs></svg>
<script src="data.js"></script>
<script>
document.addEventListener('DOMContentLoaded',()=>{const e="85590628331",t={products:mendozaData.products||[],paymentMethods:mendozaData.paymentMethods||[],cart:JSON.parse(localStorage.getItem("mendozaCart")||"[]"),activeCategory:null,activeSubcategory:null,selectedPaymentMethod:null},a=e=>document.getElementById(e),o={productGrid:a("product-grid"),categoryFilters:a("category-filters"),subcategorySection:a("subcategory-section"),subcategoryTitle:a("subcategory-title"),subcategoryFilters:a("subcategory-filters"),productSectionTitle:a("product-section-title"),cartCount:a("cart-count"),modalContainer:a("modal-container"),themeIcon:a("theme-icon-container")},n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0),l={renderPage:()=>{if(!t.activeCategory)return;a("initial-message")?.remove();const e=[...new Set(t.products.filter(e=>e.category===t.activeCategory).map(e=>e.subcategory))];o.subcategorySection.classList.toggle("hidden",!e.length),o.subcategoryTitle.textContent=`Sub-Kategori: ${t.activeCategory}`,o.subcategoryFilters.innerHTML=e.map(e=>`<button class="filter-btn px-3 py-1.5 rounded-lg border" data-action="filter" data-filter-type="subcategory" data-value="${e}">${e}</button>`).join(""),o.productSectionTitle.textContent=`${t.activeCategory} / ${t.activeSubcategory}`;const n=t.products.filter(e=>e.category===t.activeCategory&&e.subcategory===t.activeSubcategory);o.productGrid.innerHTML=n.length?n.map(e=>{const t=(e.image||"").split("|")[0]||"https://placehold.co/400x400/ccc/fff?text=No+Image";return `<div class="bg-white rounded-lg shadow-md overflow-hidden transform hover:-translate-y-1 cursor-pointer" data-action="open-product" data-product-id="${e.id}"><img src="${t}" alt="${e.name}" class="w-full h-56 object-cover" loading="lazy"><div class="p-4"><h3 class="font-bold truncate">${e.name}</h3><p class="text-sm text-gray-500">${e.subcategory}</p><p class="mt-1 font-semibold">${l(e.price)}</p></div></div>`}).join(""):`<p class="col-span-full text-center">Tidak ada produk.</p>`,document.querySelectorAll(".filter-btn").forEach(e=>{const{filterType:a,value:o}=e.dataset,n="category"===a&&o===t.activeCategory||"subcategory"===a&&o===t.activeSubcategory;e.classList.toggle("active",n)})},updateCartDisplay:()=>{t.cart=JSON.parse(localStorage.getItem("mendozaCart")||"[]"),o.cartCount.textContent=t.cart.reduce((e,t)=>e+t.quantity,0)},openModal(e){o.modalContainer.innerHTML=`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-backdrop" data-action="close-modal-backdrop">${e}</div>`,document.body.style.overflow="hidden"},closeModal(){o.modalContainer.innerHTML="",document.body.style.overflow="auto"},toggleTheme(e){o.themeIcon.setAttribute("href",e?"#icon-sun":"#icon-moon")}},i={open-product:e=>{const o=t.products.find(t=>t.id==e.dataset.productId);if(!o)return;const a=(o.image||"").split("|").filter(e=>e.trim()),r=a.length>1,c=r?`<div class="flex space-x-2 mt-4 p-2 overflow-x-auto">${a.map((e,t)=>`<img src="${e}" alt="Thumb ${t+1}" data-action="gallery-thumb" data-index="${t}" class="thumbnail-image w-16 h-16 object-cover rounded-md ${0===t?"active":""}">`).join("")}</div>`:"",d=r?`<button class="image-nav-btn absolute top-1/2 -translate-y-1/2 left-2" data-action="gallery-nav" data-direction="-1"><</button><button class="image-nav-btn absolute top-1/2 -translate-y-1/2 right-2" data-action="gallery-nav" data-direction="1">></button>`:"";l.openModal(`<div class="bg-white dark:bg-slate-800 rounded-lg shadow-2xl w-full max-w-4xl mx-auto modal" data-images='${JSON.stringify(a)}' data-current-index="0"><div class="flex flex-col md:flex-row max-h-[90vh]"><div class="w-full md:w-1/2 p-4 flex flex-col justify-center bg-gray-100 dark:bg-slate-900"><div class="main-image-wrapper relative"><img id="main-product-image" src="${a[0]||"https://placehold.co/600x600/ccc/fff?text=N/A"}" alt="${o.name}" class="w-full h-auto object-contain max-h-[50vh]">${d}</div>${c}</div><div class="p-6 flex flex-col justify-between md:w-1/2 overflow-y-auto"><div><div class="flex justify-between items-start"><h2 class="text-3xl font-bold">${o.name}</h2><button data-action="close-modal" class="text-2xl -mt-2">×</button></div><p class="text-sm bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded-full inline-block my-2">${o.category} / ${o.subcategory}</p><p class="text-2xl font-semibold my-2">${n(o.price)}</p><div class="mt-4">${(o.description||"").replace(/\n/g,"<br>")}</div></div><button data-action="add-to-cart" data-product-id="${o.id}" class="w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg mt-6 hover:bg-blue-600">Tambah</button></div></div></div>`)},"open-cart":()=>{const e=t.cart.reduce((e,t)=>e+t.price*t.quantity,0),a=t.cart.length?t.cart.map(e=>`<div class="flex justify-between items-center mb-4"><img src="${(e.image||"").split("|")[0]}" alt="${e.name}" class="w-16 h-16 object-cover rounded-md mr-4"><div><h4 class="font-bold">${e.name}</h4><p class="text-sm">${n(e.price)} x ${e.quantity}</p></div><div class="text-right"><span class="font-semibold">${n(e.price*e.quantity)}</span><button data-action="remove-from-cart" data-product-id="${e.id}" class="text-red-500 font-bold text-xl ml-4">×</button></div></div>`).join(""):`<p class="text-center text-gray-500">Keranjang kosong.</p>`;l.openModal(`<div class="bg-white dark:bg-slate-800 rounded-lg shadow-2xl w-full max-w-lg mx-auto modal"><div class="p-6"><div class="flex justify-between items-center border-b pb-4 mb-4"><h3 class="text-2xl font-bold">Keranjang</h3><button data-action="close-modal" class="text-2xl">×</button></div><div class="max-h-80 overflow-y-auto">${a}</div><div class="border-t pt-4 mt-4"><div class="flex justify-between font-bold text-lg"><span>Total</span><span>${n(e)}</span></div><button data-action="go-to-payment" class="w-full bg-blue-500 text-white font-bold py-3 rounded-lg mt-4 ${t.cart.length?"":"opacity-50 cursor-not-allowed"}" ${t.cart.length?"":"disabled"}>Pembayaran</button></div></div></div>`)},"go-to-payment":()=>{if(!t.cart.length)return;l.closeModal(),t.selectedPaymentMethod=null;const e=t.paymentMethods.map(e=>`<div class="payment-option border rounded-lg p-4 cursor-pointer" data-action="select-payment" data-method-id="${e.id}"><label class="flex items-center w-full cursor-pointer"><img src="${e.logo}" class="w-20 h-10 object-contain mr-4" onerror="this.style.display='none'"><div class="flex-grow"><p class="font-bold">${e.name}</p><p class="text-sm">${(e.details||"").replace(/<br>/g," ")}</p></div><div class="radio-check w-5 h-5 border-2 rounded-full ml-4 shrink-0"><div class="w-2.5 h-2.5 bg-blue-500 rounded-full hidden"></div></div></label></div>`).join("");l.openModal(`<div class="bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg mx-auto modal"><div class="p-6"><div class="flex justify-between items-center"><h3 class="text-2xl font-bold">Pilih Pembayaran</h3><button data-action="close-modal" class="text-2xl">×</button></div><div class="space-y-4 mt-6">${e}</div><div id="barcode-display-area" class="mt-4 text-center"></div><div class="pt-4 mt-6 border-t"><button data-action="confirm-payment" class="w-full bg-green-500 text-white font-bold py-3 rounded-lg"><i class="fab fa-whatsapp"></i> Konfirmasi</button></div></div></div>`)},"select-payment":e=>{t.selectedPaymentMethod=t.paymentMethods.find(t=>t.id==e.dataset.methodId),document.querySelectorAll(".payment-option").forEach(e=>{e.classList.remove("selected","border-blue-500"),e.querySelector(".radio-check > div").classList.add("hidden")}),e.classList.add("selected","border-blue-500"),e.querySelector(".radio-check > div").classList.remove("hidden"),a("barcode-display-area").innerHTML=t.selectedPaymentMethod?.barcode?`<p class="font-semibold mb-2 mt-4">Scan:</p><img src="${t.selectedPaymentMethod.barcode}" class="mx-auto max-w-xs rounded-md">`:""},"confirm-payment":()=>{if(!t.selectedPaymentMethod)return void alert("Pilih metode pembayaran.");const a=t.cart.reduce((e,t)=>e+t.price*t.quantity,0);let o=`Halo, saya mau pesan:\n\n${t.cart.map(e=>`*${e.name}*\n(${n(e.price)} x ${e.quantity}) = ${n(e.price*e.quantity)}\n`).join("\n")}*Total: ${n(a)}*\n*Bayar via: ${t.selectedPaymentMethod.name}*\n\nTerima kasih.`;window.open(`https://wa.me/${e}?text=${encodeURIComponent(o)}`,"_blank"),t.cart=[],localStorage.removeItem("mendozaCart"),l.updateCartDisplay(),l.closeModal()},"add-to-cart":e=>{const o=t.products.find(t=>t.id==e.dataset.productId);if(!o)return;const a=t.cart.find(e=>e.id==o.id);a?a.quantity++:t.cart.push({...o,quantity:1}),localStorage.setItem("mendozaCart",JSON.stringify(t.cart)),l.updateCartDisplay(),l.closeModal()},"remove-from-cart":e=>{const o=t.cart.findIndex(t=>t.id==e.dataset.productId);o>-1&&(t.cart[o].quantity--,0===t.cart[o].quantity&&t.cart.splice(o,1)),localStorage.setItem("mendozaCart",JSON.stringify(t.cart)),l.updateCartDisplay(),i["open-cart"]()},close-modal:l.closeModal,"close-modal-backdrop":e=>{e.target===e.currentTarget&&l.closeModal()},"filter":e=>{const{filterType:a,value:o}=e.dataset;"category"===a?(t.activeCategory=o,t.activeSubcategory=[...new Set(t.products.filter(e=>e.category===t.activeCategory).map(e=>e.subcategory))][0]):t.activeSubcategory=o,l.renderPage()},"gallery-nav":e=>{const t=e.closest(".modal"),a=parseInt(t.dataset.currentIndex),o=parseInt(e.dataset.direction),n=JSON.parse(t.dataset.images),i=(a+o+n.length)%n.length;t.querySelector("#main-product-image").src=n[i],t.dataset.currentIndex=i,t.querySelectorAll(".thumbnail-image").forEach(e=>e.classList.toggle("active",e.dataset.index==i))},"gallery-thumb":e=>{const t=e.closest(".modal"),a=parseInt(e.dataset.index);t.querySelector("#main-product-image").src=JSON.parse(t.dataset.images)[a],t.dataset.currentIndex=a,t.querySelectorAll(".thumbnail-image").forEach(e=>e.classList.toggle("active",e.dataset.index==a))},"toggle-theme":()=>{const e=document.documentElement.classList.toggle("dark");localStorage.setItem("theme",e?"dark":"light"),l.toggleTheme(e)}};document.addEventListener("click",e=>{const t=e.target.closest("[data-action]");t&&i[t.dataset.action]&&(e.preventDefault(),i[t.dataset.action](t))});const r=document.documentElement.classList.contains("dark");l.toggleTheme(r),o.categoryFilters.innerHTML=[...new Set(t.products.map(e=>e.category))].map(e=>`<button class="filter-btn px-4 py-2 rounded-lg border" data-action="filter" data-filter-type="category" data-value="${e}">${e}</button>`).join(""),t.activeCategory=t.products.length?[...new Set(t.products.map(e=>e.category))][0]:null,t.activeSubcategory=t.activeCategory?[...new Set(t.products.filter(e=>e.category===t.activeCategory).map(e=>e.subcategory))][0]:null,t.products.length>0?l.renderPage():o.productGrid.innerHTML=`<p class="col-span-full text-center">Toko sedang kosong.</p>`,l.updateCartDisplay(),a("initial-message")?.remove()});
</script>
</body>
</html>
